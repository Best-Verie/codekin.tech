---
title: What are esmodules in Nodejs
publishedOn: Sun, 31 Jan 2021 19:46:46 GMT
author: Naomi Wills
summary: Lorem ipsum dolor sit amet
slug: top-10-wiki-apps
url: https://codekin.tech/top-10-wiki-apps
image: /images/ocean.jpg
---

# ESM modules in Nodejs



By June 2015, esmodules were standrized as part of es2015
   July 2017, it was added into nodejs, in experimental


   Why did it take so long to add esmodules in nodejs


   what are esmodules in nodejs


   So is it just syntatic differences, no


   The differences between cjs and Esm


   Esm is strict while cjs is not

   in stry and catch

   if the variable is not defined it will through an error
   x is global


   this.y will through an exception

   Esm is browser compatible while cjs is not
   Esm is module
   Cjs is not allowed to import it's a sycript syntanx
   Esm is sync and Supports top level await while cjs does not


   But for editors in order to parse text they need to know when a prticular file is a module or is a nomral js file

   The came up with a rule that module is esm extension is mjs
                              module is cjs when extension is js

   But community didn't accept the proposal

   In 2020 node.js introduced a capcity to add esm to node.js projects

   ```js
   {
      type:"module"
   }
   ```

   The writers of the esm forces us to add extensions so that we can become browser compatible, because that's how
   browsers do it.

   You can't run a js file module into the browser without the extension



  ### Esm is statically parsed

  In cjs the require statment does execution of the imported piece of code


  ### ESM is an async

  This simply means that loading, parsing, binding can happen concurrently before execution stats


  Differences with Cjs

  1. Esm  loading/parsing is sync and concurrent(Execution is synchronous)  while in cjs loading is synchronous and serial(loading === execution)

  2. await ('./module.js') === require('../module.js')
  3. Doesn't stop  sync actions while cjs stops sync actions
  4. Supports top level await while cjs doesn't


  Todo do async previous it was alowed inside async top level, but waht if we want todo it asyncnously, Esm modules does it. you can include a file asynclonusly.



  ### What if you use Babel

  Using this there is no two stage parsing/execution: no spec-compliant
  It uses The node.js module resolution


  ### Esm vs Babel

  Esm is strick, Babel is also strick
  Esm is browser compatible, Babel's transipiration is not
  Esm is statically parsed, Babel transipiration is not
  Esm is async and Supports top level await, Babel transipiration is not and doesnot
  ESM is native, Babel is transpired



  ### Exports

  Remember main in Package.json the entry point to the package

  #### conditionaly Exports

  You can conditioanally exports both esm and cjs


  ## Migrating to esm


# Resouce
- [Nodeconf](https://www.youtube.com/watch?v=mMEKrHmZLpQ)
- [TC39 SPEC](https://tc39.es/ecma262/#sec-modules)
- [Nodejs Documentations](https://nodejs.org/api/esm.html#esm_modules_ecmascript_modules)
- [Mozilla](https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/)
